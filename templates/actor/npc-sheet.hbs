<form class="{{cssClass}} flexcol" autocomplete="off">
  <section class="sheet-body npc-statblock">
    <header class="sheet-header npc-header compact">
      <div class="title-stack">
        <div class="name-row">
          <input class="npc-name" name="name" type="text" value="{{actor.name}}" placeholder="NPC Name"/>
          <div class="tl-chip">
            <span>{{localize "VAGABOND.NPC.TL"}}:</span>
            <input type="number" name="system.tl" value="{{system.tl}}" step="0.1" data-dtype="Number" min="0"/>
          </div>
        </div>

        <div class="tag-row">
          <div class="tag-pill">
            <label>{{localize "VAGABOND.NPC.Size"}}</label>
            <select name="system.size">
              {{#select system.size}}
              {{#each config.sizes as |label key|}}
              <option value="{{key}}">{{localize label}}</option>
              {{/each}}
              {{/select}}
            </select>
          </div>

          <div class="tag-pill">
            <label>{{localize "VAGABOND.NPC.Type"}}</label>
            <select name="system.type">
              {{#select system.type}}
              {{#each config.beingTypes as |label key|}}
              <option value="{{key}}">{{localize label}}</option>
              {{/each}}
              {{/select}}
            </select>
          </div>
        </div>
      </div>

      <img class="profile npc-avatar" src="{{actor.img}}" data-action="editImage" title="Click to change image" alt="{{actor.name}}"/>
    </header>

    <div class="statline">
      <div class="stat-row primary">
        <div class="stat-block hd">
          <label>{{localize "VAGABOND.NPC.HD"}}:</label>
          <input type="number" name="system.hd" value="{{system.hd}}" data-dtype="Number" min="1"/>
        </div>

        <div class="stat-block hp">
          <label>{{localize "VAGABOND.NPC.HitPoints"}}:</label>
          <div class="stat-value hp-line">
            <input type="number" name="system.hp.value" value="{{system.hp.value}}" data-dtype="Number" min="0"/>
          </div>
        </div>

        <div class="stat-block speed">
          <label>{{localize "VAGABOND.NPC.Speed"}}:</label>
          <div class="stat-value speed-line">
            <input type="number" name="system.speed.base" value="{{system.speed.base}}" data-dtype="Number" min="0"/>
          </div>
        </div>
      </div>

      <hr class="dotted-rule"/>

      <div class="stat-columns">
        <div class="stat-column">
          <div class="stat-block appearing">
            <label>{{localize "VAGABOND.NPC.Appearing"}}:</label>
            <input type="text" name="system.appearing" value="{{system.appearing}}" placeholder="1d6"/>
          </div>

          <div class="stat-block zone">
            <label>{{localize "VAGABOND.NPC.Zone"}}:</label>
            <select name="system.zone">
              {{#select system.zone}}
              {{#each config.npcZones as |label key|}}
              <option value="{{key}}">{{localize label}}</option>
              {{/each}}
              {{/select}}
            </select>
          </div>

          <div class="stat-block morale">
            <label>{{localize "VAGABOND.NPC.Morale"}}:</label>
            <input type="number" name="system.morale" value="{{system.morale}}" data-dtype="Number" min="2" max="12"/>
          </div>

          <div class="stat-block armor">
            <label>{{localize "VAGABOND.NPC.Armor"}}:</label>
            <div class="stat-value armor-line">
              <input type="number" name="system.armor.value" value="{{system.armor.value}}" data-dtype="Number" min="0"/>
              <select name="system.armor.type">
                {{#select system.armor.type}}
                <option value="none">-</option>
                {{#each config.armorTypes as |label key|}}
                <option value="{{key}}">{{localize label}}</option>
                {{/each}}
                {{/select}}
              </select>
            </div>
          </div>
        </div>

        <div class="stat-column">
          <div class="stat-block senses">
            <label>{{localize "VAGABOND.NPC.Senses"}}</label>
            <input type="text" name="system.senses" value="{{system.senses}}" placeholder="None"/>
          </div>
          <div class="stat-block weak">
            <label>{{localize "VAGABOND.NPC.Weak"}}</label>
            <input type="text" name="system.weak" value="{{system.weak}}" placeholder="None"/>
          </div>
          <div class="stat-block immune">
            <label>{{localize "VAGABOND.NPC.Immune"}}</label>
            <input type="text" name="system.immune" value="{{system.immune}}" placeholder="None"/>
          </div>
        </div>
      </div>
    </div>

    <div class="npc-section">
      <div class="section-header">
        <h2>{{localize "VAGABOND.NPC.Actions"}}</h2>
        <button type="button" data-action="addAction" class="icon-only" title="Add Action"><i class="fas fa-plus"></i></button>
      </div>
      <div class="section-body">
        {{#if system.actions.length}}
          {{#each system.actions as |action index|}}
          <div class="list-entry compact">
            <div class="entry-top">
              <input type="text" name="system.actions.{{index}}.name" value="{{action.name}}" placeholder="Bite"/>
              <input type="text" class="tags" name="system.actions.{{index}}.tags" value="{{action.tags}}" placeholder="[Melee Attack]"/>
              <button type="button" data-action="removeAction" data-index="{{index}}" class="icon-only" title="Remove Action">
                <i class="fas fa-trash"></i>
              </button>
            </div>
            <textarea name="system.actions.{{index}}.effect" rows="2" placeholder="5 (2d4)">{{action.effect}}</textarea>
          </div>
          {{/each}}
        {{else}}
          <p class="hint">Add attacks or maneuvers the creature can take.</p>
        {{/if}}
      </div>
    </div>

    <div class="npc-section">
      <div class="section-header">
        <h2>{{localize "VAGABOND.NPC.Abilities"}}</h2>
        <button type="button" data-action="addAbility" class="icon-only" title="Add Ability"><i class="fas fa-plus"></i></button>
      </div>
      <div class="section-body">
        {{#if system.abilities.length}}
          {{#each system.abilities as |ability index|}}
          <div class="list-entry compact">
            <div class="entry-top">
              <input type="text" name="system.abilities.{{index}}.name" value="{{ability.name}}" placeholder="Pack Hunter"/>
              <button type="button" data-action="removeAbility" data-index="{{index}}" class="icon-only" title="Remove Ability">
                <i class="fas fa-trash"></i>
              </button>
            </div>
            <textarea name="system.abilities.{{index}}.description" rows="2" placeholder="Describe the special rule.">{{ability.description}}</textarea>
          </div>
          {{/each}}
        {{else}}
          <p class="hint">Call out special rules like Pack Hunter or Amphibious.</p>
        {{/if}}
      </div>
    </div>

    <div class="npc-section notes-section">
      <div class="section-header">
        <h2>{{localize "VAGABOND.NPC.Notes"}}</h2>
        {{#if editable}}
        <button type="button" class="icon-only editor-edit" data-action="toggleEditor" data-target="system.biography" title="Edit Notes">
          <i class="fas fa-edit"></i>
        </button>
        {{/if}}
      </div>
      <div class="editor-container compact">
        <div class="editor-content" data-edit="system.biography">
          {{{enrichedBiography}}}
        </div>
      </div>
    </div>
  </section>
</form>
